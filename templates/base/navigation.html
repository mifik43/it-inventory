
<ul class="nav nav-pills flex-column mb-auto">
    <li class="nav-item">
        <a class="nav-link {% if request.endpoint == 'index' %}active{% endif %}" 
           href="{{ url_for('index') }}">
            <i class="bi bi-speedometer2"></i>
            Дашборд
        </a>
    </li>
    
    <!-- Serviced Items Dropdown -->
    <li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle {% if request.endpoint in ['devices', 'add_device', 'edit_device', 'providers', 'add_provider', 'edit_provider', 'cubes', 'add_cube', 'edit_cube', 'organizations', 'add_organization', 'edit_organization', 'guest_wifi', 'add_guest_wifi', 'edit_guest_wifi'] %}active{% endif %}" 
       href="#" data-bs-toggle="dropdown">
        <i class="bi bi-tools"></i>
        На обслуживании
    </a>
    <ul class="dropdown-menu">
        <li>
            <a class="dropdown-item {% if request.endpoint in ['devices', 'add_device', 'edit_device'] %}active{% endif %}" 
               href="{{ url_for('devices.devices') }}">
                <i class="bi bi-pc-display"></i> Устройства
            </a>
        </li>
        <li>
            <a class="dropdown-item {% if request.endpoint in ['providers', 'add_provider', 'edit_provider'] %}active{% endif %}" 
               href="{{ url_for('providers.providers') }}">
                <i class="bi bi-wifi"></i> Провайдеры
            </a>
        </li>
        <!-- ДОБАВЛЯЕМ ГОСТЕВОЙ WIFI -->
        <li>
            <a class="dropdown-item {% if request.endpoint in ['guest_wifi', 'add_guest_wifi', 'edit_guest_wifi'] %}active{% endif %}" 
               href="{{ url_for('guest_wifi') }}">
                <i class="bi bi-router"></i> Гостевой WiFi
            </a>
        </li>
        <li>
            <a class="dropdown-item {% if request.endpoint in ['cubes', 'add_cube', 'edit_cube'] %}active{% endif %}" 
               href="{{ url_for('cubes.cubes') }}">
                <i class="bi bi-box"></i> Программы
            </a>
        </li>
        <li>
            <a class="dropdown-item {% if request.endpoint in ['organizations', 'add_organization', 'edit_organization'] %}active{% endif %}" 
               href="{{ url_for('organizations') }}">
                <i class="bi bi-building"></i> Организации
            </a>
        </li>
    </ul>
</li>

    <!-- Knowledge Base -->
    <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle {% if request.endpoint in ['articles_list', 'view_article', 'add_article', 'edit_article', 'notes_list', 'add_note', 'edit_note'] %}active{% endif %}" 
           href="#" data-bs-toggle="dropdown">
            <i class="bi bi-journal-text"></i>
            База знаний
        </a>
        <ul class="dropdown-menu">
            <li>
                <a class="dropdown-item {% if request.endpoint in ['articles_list', 'view_article', 'add_article', 'edit_article'] %}active{% endif %}" 
                   href="{{ url_for('articles_list') }}">
                    <i class="bi bi-journal-text"></i> Статьи
                </a>
            </li>
            <li>
                <a class="dropdown-item {% if request.endpoint in ['notes_list', 'add_note', 'edit_note'] %}active{% endif %}" 
                   href="{{ url_for('notes_list') }}">
                    <i class="bi bi-sticky"></i> Заметки
                </a>
            </li>
        </ul>
    </li>
    
    <!-- TODO -->
    <li class="nav-item">
        <a class="nav-link {% if request.endpoint in ['todo', 'add_todo', 'edit_todo'] %}active{% endif %}" 
           href="{{ url_for('todo') }}">
            <i class="bi bi-check-square"></i>
            Задачи
        </a>
    </li>
    
    <!-- Shifts -->
    <li class="nav-item">
        <a class="nav-link {% if request.endpoint in ['shifts_list', 'add_shift', 'edit_shift'] %}active{% endif %}" 
           href="{{ url_for('shifts_list') }}">
            <i class="bi bi-calendar-week"></i>
            График смен
        </a>
    </li>
        <!-- roles -->
    {% if 'roles_manage' in session.permissions or 'roles_read' in session.permissions %}
    <li class="nav-item">
        <a class="nav-link {% if request.endpoint in ['roles', 'create_role', 'edir_role'] %}active{% endif %}" 
           href="{{ url_for('roles.roles') }}">
            <i class="bi bi-calendar-week"></i>
            Роли пользователей
        </a>
    </li>
    {% endif %}
    <!-- Admin Only -->
    {% if 'users_manage' in session.permissions or 'users_read' in session.permissions %}
    <li class="nav-item">
        <a class="nav-link {% if request.endpoint in ['users', 'create_user', 'edit_user'] %}active{% endif %}" 
           href="{{ url_for('users.users') }}">
            <i class="bi bi-people"></i>
            Пользователи
        </a>
    </li>
    {% endif %}
</ul>
